<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="toolbar">
        <div class="tool pencil">
            <img src="./NewIcons/Black_Pencil.svg" heigth="40" width="40">
            <div class="size-container">
                <div class="size1"></div>
                <div class="size2"></div>
                <div class="size3"></div>
                <div class="size4"></div>
            </div>
        </div>
        <div class="tool eraser">
            <img src="NewIcons/Eraser.svg" heigth="40" width="40">
            <div class="size-container">
                <div class="size1"></div>
                <div class="size2"></div>
                <div class="size3"></div>
                <div class="size4"></div>
            </div>
        </div>
        <div class="tool fas fa-square">
            <div class="size-container">
                <div class="size1"></div>
                <div class="size2"></div>
                <div class="size3"></div>
                <div class="size4"></div>
            </div>
        </div>
        <div class="tool fas fa-grip-lines-vertical">
            <div class="size-container">
                <div class="size1"></div>
                <div class="size2"></div>
                <div class="size3"></div>
                <div class="size4"></div>
            </div>
        </div>
        <div class="color-container">
            <div class="color red"></div>
            <div class="color green"></div>
            <div class="color blue"></div>
        </div>
    </div>
    <canvas></canvas>
</body>
<script>
    //implement background color on selected icon
    let canvasBoard=document.querySelector("canvas");
    let tool=canvasBoard.getContext("2d");
    canvasBoard.height=window.innerHeight;
    canvasBoard.width=window.innerWidth/2;
    tool.strokeStyle="red";
    let iX, iY, fX, fY, mousedown=false;
    let body= document.querySelector("body");
    let redDiv=document.querySelector(".red");
    let blueDiv=document.querySelector(".blue");
    let greenDiv=document.querySelector(".green");
    let rectTool= document.querySelector(".fa-square");
    let lineTool = document.querySelector(".fa-grip-lines-vertical");
    let eraserTool= document.querySelector(".eraser");
    let pencilTool = document.querySelector(".pencil");
    let options=document.querySelectorAll(".size-container");
    let colorOptions=document.querySelectorAll(".color")
    let cTool;
    let pencilColor="red";
    let rectColor="red";
    let lineColor="red";
    pencilTool.addEventListener("click", function(){
        if(cTool=="pencil"){
            options[0].style.display = "flex";
        }else{
            cTool="pencil";
            tool.strokeStyle=pencilColor;
            for(let i=0;i<colorOptions.length;i++){
                colorOptions[i].style.borderStyle="none";
            }
            if(pencilColor=="red"){
                colorOptions[0].style.borderStyle="solid";
            }else if(pencilColor=="green"){
                colorOptions[1].style.borderStyle="solid";
            }else if(pencilColor=="blue"){
                colorOptions[2].style.borderStyle="solid";
            }
            
            for(let i=0;i<options.length;i++) {
                options[i].style.display = "none";
            }   
        }
    })
    eraserTool.addEventListener("click", function(){
        if(cTool=="eraser"){
            options[1].style.display = "flex";
        }else{
            cTool="eraser";
            tool.strokeStyle="white";
            for(let i=0;i<options.length;i++) {
                options[i].style.display = "none";
            }   
        }
    })
    rectTool.addEventListener("click", function() {
        
        if(cTool=="rectTool"){
            options[2].style.display = "flex";
        }else{
            cTool="rectTool";
            tool.strokeStyle=rectColor;
            for(let i=0;i<colorOptions.length;i++){
                colorOptions[i].style.borderStyle="none";
            }
            if(rectColor=="red"){
                colorOptions[0].style.borderStyle="solid";
            }else if(rectColor=="green"){
                colorOptions[1].style.borderStyle="solid";
            }else if(rectColor=="blue"){
                colorOptions[2].style.borderStyle="solid";
            }
            for(let i=0;i<options.length;i++) {
                options[i].style.display = "none";
            }
        }
        
    })
    lineTool.addEventListener("click", function() {
        if(cTool=="lineTool"){
            options[3].style.display = "flex";
        }else{
            cTool="lineTool";
            tool.strokeStyle=lineColor;
            for(let i=0;i<colorOptions.length;i++){
                colorOptions[i].style.borderStyle="none";
            }
            if(lineColor=="red"){
                colorOptions[0].style.borderStyle="solid";
            }else if(lineColor=="green"){
                colorOptions[1].style.borderStyle="solid";
            }else if(lineColor=="blue"){
                colorOptions[2].style.borderStyle="solid";
            }
            for(let i=0;i<options.length;i++) {
                options[i].style.display = "none";
            }   
        }
    })
    
    redDiv.addEventListener("click", function(){
        for(let i=0;i<colorOptions.length;i++){
                colorOptions[i].style.borderStyle="none";
            }
        colorOptions[0].style.borderStyle="solid";
        if(cTool=="pencil"){
            pencilColor="red";
            tool.strokeStyle="red";
        }else if(cTool=="rectTool"){
            rectColor="red";
            tool.strokeStyle="red";
        }else if(cTool=="lineTool"){
            lineTool="red";
            tool.strokeStyle="red";
        }
       //tool.strokeStyle="red";
       //colorArea.style.backgroundColor="red";
    })
    greenDiv.addEventListener("click", function(){
        for(let i=0;i<colorOptions.length;i++){
                colorOptions[i].style.borderStyle="none";
            }
        colorOptions[1].style.borderStyle="solid";
        if(cTool=="pencil"){
            pencilColor="green";
            tool.strokeStyle="green";
        }else if(cTool=="rectTool"){
            rectColor="green";
            tool.strokeStyle="green";
        }else if(cTool=="lineTool"){
            lineTool="green";
            tool.strokeStyle="green";
        }
    })
    blueDiv.addEventListener("click", function(){
        for(let i=0;i<colorOptions.length;i++){
                colorOptions[i].style.borderStyle="none";
            }
        colorOptions[2].style.borderStyle="solid";
        if(cTool=="pencil"){
            pencilColor="blue";
            tool.strokeStyle="blue";
        }else if(cTool=="rectTool"){
            rectColor="blue";
            tool.strokeStyle="blue";
        }else if(cTool=="lineTool"){
            lineTool="blue";
            tool.strokeStyle="blue";
        }
       
    })
    
    
    body.addEventListener("mousedown",function (e) {
            mousedown=true;
            iX=e.clientX-canvasBoard.getBoundingClientRect().left; //canvasBoard.getBoundingClientRect().left ->it gives distance of canvas from left side of the window
            iY=e.clientY-canvasBoard.getBoundingClientRect().top;
            if(cTool=="pencil" || cTool=="eraser"){
                tool.beginPath();
                tool.moveTo(iX,iY);
            }
    })
    body.addEventListener("mouseup",function (e) {
            mousedown=false;
            fX=e.clientX-canvasBoard.getBoundingClientRect().left;
            fY=e.clientY-canvasBoard.getBoundingClientRect().top;
            if(cTool=="rectTool"){
                let height=fY-iY;
                let width=fX-iX;
                tool.strokeRect(iX,iY, width, height);
            }else if(cTool=="lineTool"){
                tool.beginPath();
                tool.moveTo(iX,iY);
                tool.lineTo(fX,fY);
                tool.stroke();
            }
    })
    
    body.addEventListener("mousemove", function(e){
        if(mousedown==true){
            if(cTool=="pencil" || cTool=="eraser"){
                fX=e.clientX-canvasBoard.getBoundingClientRect().left;
                fY=e.clientY-canvasBoard.getBoundingClientRect().top;
                tool.lineTo(fX, fY);
                tool.stroke();
            }
            
        }
    })

    let pencilSize=5;
    let rectSize=5;
    let eraserSize=5;
    let lineSize=5;

    let sizeBoxArr=document.querySelectorAll(".size-container");
    sizeBoxArr[0].addEventListener("click", function(e){
        let elems=["size1","size2","size3","size4"];
        let allTheClasses=e.target.classList;
        console.log(e);
        let firstClass=allTheClasses[0];
        let test=elems.includes(firstClass);
        if(test){
            if(firstClass=="size1"){
                pencilSize=5;         
            }else if(firstClass=="size2"){
                pencilSize=10;
            }else if(firstClass=="size3"){
                pencilSize=15;
            }else if(firstClass=="size4"){
                pencilSize=20;
            }
        }
        tool.lineWidth=pencilSize;
    })
    sizeBoxArr[1].addEventListener("click", function(e){
        let elems=["size1","size2","size3","size4"];
        let allTheClasses=e.target.classList;
        console.log(e);
        let firstClass=allTheClasses[0];
        let test=elems.includes(firstClass);
        if(test){
            if(firstClass=="size1"){
                eraserSize=5;         
            }else if(firstClass=="size2"){
                eraserSize=10;
            }else if(firstClass=="size3"){
                eraserSize=15;
            }else if(firstClass=="size4"){
                eraserSize=20;
            }
        }
        tool.lineWidth=eraserSize;   
    })
    sizeBoxArr[2].addEventListener("click", function(e){
        let elems=["size1","size2","size3","size4"];
        let allTheClasses=e.target.classList;
        console.log(e);
        let firstClass=allTheClasses[0];
        let test=elems.includes(firstClass);
        if(test){
            if(firstClass=="size1"){
                rectSize=5;         
            }else if(firstClass=="size2"){
                rectSize=10;
            }else if(firstClass=="size3"){
                rectSize=15;
            }else if(firstClass=="size4"){
                rectSize=20;
            }
        }
        tool.lineWidth=rectSize;   
    })
    sizeBoxArr[3].addEventListener("click", function(e){
        let elems=["size1","size2","size3","size4"];
        let allTheClasses=e.target.classList;
        console.log(e);
        let firstClass=allTheClasses[0];
        let test=elems.includes(firstClass);
        if(test){
            if(firstClass=="size1"){
                lineSize=5;         
            }else if(firstClass=="size2"){
                lineSize=10;
            }else if(firstClass=="size3"){
                lineSize=15;
            }else if(firstClass=="size4"){
                lineSize=20;
            }
        }
        tool.lineWidth=lineSize;   
    })

</script>
</html>